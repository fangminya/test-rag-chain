# RAG 智能问答系统

基于知识库的智能问答系统，支持多轮对话。

## 部署到 Streamlit Community Cloud

### 1. 准备文件

确保以下文件都在项目根目录：
- `streamlit_app.py` - 主应用文件
- `requirements.txt` - 依赖包列表
- `.streamlit/config.toml` - Streamlit 配置
- `zhipuai_embedding.py` - 智谱AI嵌入模型
- `zhipuai_llm.py` - 智谱AI大语言模型
- `chroma/` - 向量数据库文件夹（需要上传）

### 2. 上传到 GitHub

1. 将项目推送到 GitHub 仓库
2. 确保仓库是公开的（Streamlit Community Cloud 要求）

### 3. 部署到 Streamlit Cloud

1. 访问 [share.streamlit.io](https://share.streamlit.io)
2. 使用 GitHub 账号登录
3. 点击 "New app"
4. 选择你的 GitHub 仓库
5. 设置：
   - **Main file path**: `streamlit_app.py`
   - **App URL**: 自定义应用URL（可选）

### 4. 配置 Secrets

在 Streamlit Cloud 中配置环境变量：

1. 进入你的应用设置
2. 找到 "Secrets" 部分
3. 添加以下配置：

```toml
ZHIPUAI_API_KEY = "你的智谱AI API密钥"
```

### 5. 上传向量数据库

由于 Streamlit Cloud 不支持持久化存储，你需要：

1. 将本地的 `chroma/` 文件夹压缩
2. 在应用启动时解压到临时目录
3. 或者使用云端向量数据库服务

### 6. 本地测试

在部署前，可以在本地测试：

```bash
streamlit run streamlit_app.py
```

## 注意事项

1. **API 密钥安全**：确保 API 密钥配置在 Streamlit Secrets 中，不要硬编码
2. **向量数据库**：考虑使用云端向量数据库服务（如 Pinecone、Weaviate 等）
3. **性能优化**：对于大型知识库，考虑使用缓存和异步处理
4. **错误处理**：添加适当的错误处理和用户提示

## 故障排除

- 如果遇到模块导入错误，检查 `requirements.txt` 是否包含所有依赖
- 如果 API 调用失败，检查 Secrets 配置是否正确
- 如果向量数据库加载失败，检查文件路径和权限 